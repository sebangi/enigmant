{% extends "base.html.twig" %}

{% block title  %}
    Mes grades
{% endblock title  %}

{% block body %}
    <div class="container mt-4">
        <h1>Mes grades</h1>



        <nav class="navbar navbar-expand-lg navbar-light">

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                {% for theme in themes %}
                <ul class="navbar-nav navbar-brand">
                    <li class="nav-item">
                        <a class="nav-link {% if themeCourant is defined and themeCourant == theme.getNom() %}active{% endif %}" href="{{ path('grade.index', {themeCourant: theme.nom}  ) }}">Grades en {{ theme.nom }}<span class="sr-only">(current)</span></a>
                    </li>
                </ul>           
                {% endfor %}
            </div>
        </nav>

        <div class="row">
            <table class="table table-grade">
                <thead>
                    <tr>
                        <th style="width: 3%"></th>
                        <th style="width: 20%">Grade</th>                       
                        <th style="width: 10%">Date</th>
                        <th style="width: 67%">Condition d'obtention</th>
                    </tr>
                </thead>
                <tbody>
                    {% for grade in grades %}
                        {% set obt = user.getObtentionGrade( grade.niveau_id ) %}
                        <tr bgcolor="{{ grade.niveau_couleur }}">
                            <td>
                                {% if not obt is null %}
                                        <span class="fas fa-medal text-success" aria-hidden="true"></span>
                                {% elseif not grade.niveau_disponible %}
                                    <span class="fas fa-lock" aria-hidden="true"></span>
                                {% endif %}
                            </td>
                            <td {% if not obt is null %}class="font-weight-bold"{% else %}class="font-italic"{% endif %}>{{ grade.niveau_nom }} en {{ grade.theme_nom }}</td>
                            {% if obt is null %}                                                               
                                <td></td>                            
                                <td class="font-italic">{{ grade.niveau_conditionTexte }}</td>
                            {% else %} 
                                <td>{{ obt.date | date("d/m/Y") }}</td>                            
                                <td>{{ grade.niveau_raison }}</td>                            
                            {% endif%}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
{% endblock body %}
