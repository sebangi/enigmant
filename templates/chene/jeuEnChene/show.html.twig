{% extends "chene/baseChene.html.twig" %}

{% block body %}
    <div class="jumbotron mon-jumbotron pt-0 pb-0">
        <div class="container">
            <div class="row">
                <div class="col-md-5 pl-0">
                    {% if jeuEnChene.imageName %}
                        <img src="{{ asset( vich_uploader_asset(jeuEnChene, 'imageFile') ) }}" style="width:100%; height:auto;">                   
                    {% else %}
                        <img src="{{ asset('images/jeuEnChene/vide.jpg') }}" class="card-img-top" style="width:100%;"> 
                    {% endif%}
                    {% if jeuEnChene.disponible %}
                        <img class="img-over" src="{{ asset('images/base/disponible.png') }}" > 
                    {% else %}            
                        <img class="img-over" src="{{ asset('images/base/non_disponible.png') }}" > 
                    {% endif %}
                </div>

                <div class="col-md-7 d-flex flex-column pr-0 mb-2 mt-2">

                    <h3  class="text-right">
                        <span class="float-left text-dark" 
                              href="{{ path("collectionChene.show", { slug: jeuEnChene.collectionChene.getSlug(), id: jeuEnChene.collectionChene.id }) }}"> 
                            Collection <i>{{ jeuEnChene.collectionChene.nom }}</i>
                        </span> 

                        <a class="d-inline text-primary no-padding" 
                           {% if jeuPrecedent %}
                               href="{{ path("jeuEnChene.show", { slug: jeuPrecedent.slug, id: jeuPrecedent.id }) }}"
                           {% endif %}
                           >
                            <span class="mr-2 fas fa-angle-left {% if jeuPrecedent %}text-dark{% else %}invisible{% endif %}" aria-hidden="false"></span></a>{{ jeuEnChene.num }} / {{ jeuEnChene.collectionChene.jeuEnChenes.count( ) }}
                        <a class="d-inline text-primary pt-0 pr-1 pb-0 pl-0" 
                           {% if jeuSuivant %}
                               href="{{ path("jeuEnChene.show", { slug: jeuSuivant.getSlug(), id: jeuSuivant.id }) }}"
                           {% endif %}
                           >
                            <span class="fas fa-angle-right {% if jeuSuivant %}text-dark{% else %}invisible{% endif %}" aria-hidden="true"></span>
                        </a>
                    </h3>

                    <h1 class="text-color-2 font-weight-bold">
                        {{ jeuEnChene.nom }}
                    </h1>  

                    <div class="mt-4 text-justify">{{ jeuEnChene.description | nl2br(false) }}</div>

                    <div style="margin-top: auto;">
                        <h5 class="mb-0">
                            <u class="font-weight-bold">Location :</u>
                            <ul class="mb-0">
                                <li class="mt-1">
                                    <b>Durée conseillée :</b> 
                                    {{ jeuEnChene.getTempsLocationString() }}
                                </li>
                                <li class="mt-1">
                                    <b>Prix conseillé :</b> 
                                    {{ include('outils/_piece.html.twig', {valeur : jeuEnChene.prix}) }}
                                </li>
                            </ul>
                        </h5>

                        {% if not jeuEnChene.disponible %}
                            <a class="btn text-warning btn-secondary mt-2" data-toggle="popover" title="Location impossible" data-placement="left" data-content="Ce Jeu en Chêne est en location actuellement. Veuillez patienter un peu...">
                                Louer maintenant</span>
                            </a>
                        {% elseif is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                            <a href="{{ path('chene.location', { slug: jeuEnChene.slug, id: jeuEnChene.id }) }}" class="btn btn-success mt-2">Louer maintenant</a>
                        {% else %}
                            <a href="app_login" class="btn btn-success mt-2">Se connecter pour réserver</a>
                        {% endif %}
                        <a href="{{ path("chene.home") }}#CommentCaMarche" class="btn btn-secondary mt-2 float-right">Comment on loue ?</a>
                        <a href="{{ path("chene.home") }}#JeNAiPasDeBabioles" class="btn btn-secondary mt-2 mr-2  float-right">Je n'ai pas de babiole !</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {{ include('outils/_flash.html.twig') }}   

    <div class="container">
        {% if jeuEnChene.getCommentairesGourou %}
            <div class="row bg-color-2-light p-4">
                <div class="col-md-5">
                    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                        <h4 class="text-right">Commentaire du Grand Gourou :</h4>
                    {% else %}
                        <h4 class="text-right">Commentaire du constructeur :</h4>
                    {% endif %}
                </div>
                <div class="col-md-5 font-italic text-justify">
                    « {{ jeuEnChene.getCommentairesGourou() | nl2br(false) }} »
                </div>
            </div>

        {% endif%}

        <div class="row ml-4 mr-4 mt-4">
            <div class="col-md-5 pt-2">
                <div class="">
                    <h4 class="d-inline">Caractéristiques de difficulté :</h4>
                </div>

                <div class="pl-4 pt-2">
                    <table class="table table-striped">
                        <tr>
                            <td class="font-weight-bold text-right">Difficulté de raisonnement :</td>
                            <td class="pl-0">{% if jeuEnChene.difficulteRaisonnement %}{{ jeuEnChene.difficulteRaisonnement }}{% else %}?{% endif %} / 10
                                <a class="d-inline float-right" data-toggle="popover" title="Difficulté de raisonnement" data-content="Cela correspond à la complexité des énigmes à décrypter. Les Jeux en Chêne sont composés d'énigmes successives. Le niveau de difficulté indiqué correspond à la difficulté de l'énigme la plus coriace du Jeu.">
                                    <span class="fas fa-search text-color-2" aria-hidden="true"></span>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td  width="40%" class="font-weight-bold text-right">Difficulté d'observation :</td>
                            <td  width="20%" class="pl-0">{% if jeuEnChene.difficulteObservation %}{{ jeuEnChene.difficulteObservation }}{% else %}?{% endif %} / 10
                                <a class="d-inline float-right" data-toggle="popover" title="Difficulté d'observation" data-content="Cela correspond à la difficulté à récupérer tous les éléments visuels éparpillés sur le Jeu en Chêne. Pour un niveau facile, tous est bien visible. Mais si un élément est bien caché (par exemple, sous le Jeu en Chêne, des pointes forment une flêche), cela augmentera ce niveau de difficulté.">
                                    <span class="fas fa-search text-color-2" aria-hidden="true"></span>
                                </a>                
                            </td>
                        </tr>
                        <tr>
                            <td  width="40%" class="font-weight-bold text-right">Nombre d'étapes :</td>
                            <td  width="20%" class="pl-0">{% if jeuEnChene.nombreEtapes %}{{ jeuEnChene.nombreEtapes }}{% else %}?{% endif %}
                                <a class="d-inline float-right" data-toggle="popover" title="Nombre d'étapes" data-content="Le nombre d'étapes correspond à peu près au nombre d'énigmes à résoudre pour retrouver le médaillon. Ce nombre est important. Il influence grandement la durée et la difficulté réelle du Jeu en Chêne. Plus il y a d'étapes, plus vous jouerez longtemps ; mais plus vous risquez de buter sur une énigme...">
                                    <span class="fas fa-search text-color-2" aria-hidden="true"></span>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-weight-bold text-right">Temps de jeu moyen :</td>
                            <td class="pl-0">Non défini
                                <a class="d-inline float-right" data-toggle="popover" title="Temps de jeu" data-content="Le temps de jeu exprimé en heures est la moyenne des temps de jeu indiqués par ceux ayant déjà réservé le Jeu en Chêne.">
                                    <span class="fas fa-search text-color-2" aria-hidden="true"></span>
                                </a>
                            </td>
                        </tr>
                    </table>  
                </div>                
            </div>
            <div class="col-md-1"> 
            </div>
            <div class="col-md-5  pt-2">
                <h4>Babioles utilisées : </h4>
                <div class="pl-4 pt-2">
                    <table class="table ml-4 table-striped">
                        {% for babiole in jeuEnChene.babioles  %}
                            <tr><td>{{ babiole.nom }}</td></tr>
                        {% endfor %}
                        <tr><td class="font-weight-bold">et quelques autres à découvrir (surprise)...</td></tr>
                    </table>
                </div>
            </div>
        </div>

        <hr>        

        <div class="row  ml-4 mr-4">
            <div class="col-md-12">
                <h4>Avis des joueurs :</h4>
                <table class="table table-striped">

                </table>
            </div>
        </div>
    </div>
{% endblock body %}

